"use strict";(self.webpackChunk_weareseeed_react_square_payments_docs=self.webpackChunk_weareseeed_react_square_payments_docs||[]).push([[5948],{9667:function(e,a,t){t.d(a,{Z:function(){return s}});var n=t(7294),i=t(133);function s(e){var a=e.children;return n.createElement(i.Z,{applicationId:"sandbox-sq0idb-7KE3zXHZLG_X5EmLLptTYw",cardTokenizeResponseReceived:function(e,a){console.info({token:e,buyer:a})},createPaymentRequest:function(){return{countryCode:"US",currencyCode:"USD",total:{amount:"100",label:"Total"}}},createVerificationDetails:function(){return{amount:"1.00",billingContact:{addressLines:["123 Main Street","Apartment 1"],familyName:"Doe",givenName:"John",countryCode:"GB",city:"London"},currencyCode:"GBP",intent:"CHARGE"}},locationId:"4P550BZQ0TQZA"},a)}},199:function(e,a,t){t.r(a),t.d(a,{assets:function(){return g},contentTitle:function(){return y},default:function(){return v},frontMatter:function(){return m},metadata:function(){return f},toc:function(){return w}});var n=t(7462),i=t(3366),s=t(7294),o=t(4137),r=t(3200),p=t(9227);const l=(0,t(8152).z)("div",{ApplePayButtonStyle:"black",ApplePayButtonType:"plain",cursor:"pointer",display:"inline-block",height:48,WebkitAppearance:"-apple-pay-button",width:"100%"});function d({id:e="rswps-apple-pay",...a}){const[t,n]=s.useState((()=>{})),{cardTokenizeResponseReceived:i,createPaymentRequest:o,payments:d}=(0,r.cI)(),c=s.useRef(null);return s.useEffect((()=>{if(!o)throw new Error("`createPaymentRequest()` is required when using digital wallets");const e=new AbortController,{signal:a}=e;return(async e=>{const a=d?.paymentRequest(o);if(!a)throw new Error("`paymentRequest` is required when using digital wallets");try{const t=await(d?.applePay(a).then((a=>{if(!e?.aborted)return n(a),a})));e.aborted&&await(t?.destroy())}catch(t){console.error("Initializing Apple Pay failed",t)}})(a),()=>{e.abort()}}),[o,d]),(0,p.O)({listener:async e=>{if(e.stopPropagation(),t)try{const e=await t.tokenize();if("OK"===e.status)return i(e);let a=`Tokenization failed with status: ${e.status}`;if(e?.errors)throw a+=` and errors: ${JSON.stringify(e?.errors)}`,new Error(a);console.warn(a)}catch(a){console.error(a)}else console.warn("Apple Pay button was clicked, but no Apple Pay instance was found.")},type:"click",element:c,options:{passive:!0}}),s.createElement(l,{...a,css:{display:t?"block":"none",opacity:t?1:.5,pointerEvents:t?"auto":"none",visibility:t?"visible":"hidden"},id:e,ref:c})}var c=t(9667),u=["components"],m={id:"apple-pay-usage",title:"ApplePay - Basic Usage",slug:"/apple-pay/usage",sidebar_label:"Usage",sidebar_position:1},y="Basic usage",f={unversionedId:"digital-wallets/apple-pay/apple-pay-usage",id:"digital-wallets/apple-pay/apple-pay-usage",title:"ApplePay - Basic Usage",description:"Requests a payment nonce for a payment card stored in an Apple Pay digital wallet.",source:"@site/docs/digital-wallets/apple-pay/usage.mdx",sourceDirName:"digital-wallets/apple-pay",slug:"/apple-pay/usage",permalink:"/docs/apple-pay/usage",draft:!1,editUrl:"https://github.com/weareseeed/rswps-site/tree/main/docs/digital-wallets/apple-pay/usage.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"apple-pay-usage",title:"ApplePay - Basic Usage",slug:"/apple-pay/usage",sidebar_label:"Usage",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Callbacks",permalink:"/docs/ach/callbacks"}},g={},w=[],h={toc:w};function v(e){var a=e.components,t=(0,i.Z)(e,u);return(0,o.kt)("wrapper",(0,n.Z)({},h,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"basic-usage"},"Basic usage"),(0,o.kt)("p",null,"Requests a payment nonce for a payment card stored in an Apple Pay digital wallet."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import { ApplePay, PaymentForm } from 'react-square-web-payments-form';\n\nexport default function MyApp() {\n  return (\n    <PaymentForm>\n      <ApplePay />\n    </PaymentForm>\n  );\n}\n")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You must follow the following guide to use Apple Pay ",(0,o.kt)("a",{parentName:"p",href:"https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions"},"https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions")))),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This payment method will only render on Safari browsers that support Apple Pay."),(0,o.kt)("p",{parentName:"div"},"If you can't see the payment method below or get this error on the console:"),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("inlineCode",{parentName:"p"},"Initializing Apple Pay failed PaymentMethodUnsupportedError")),(0,o.kt)("p",{parentName:"div"},"You must try with Safari."))),(0,o.kt)(c.Z,{mdxType:"PaymentForm"},(0,o.kt)(d,{mdxType:"ApplePay"})))}v.isMDXComponent=!0}}]);
"use strict";(self.webpackChunk_weareseeed_react_square_payments_docs=self.webpackChunk_weareseeed_react_square_payments_docs||[]).push([[31],{4137:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},l=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),l=u(n),f=a,m=l["".concat(c,".").concat(f)]||l[f]||d[f]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=l;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}l.displayName="MDXCreateElement"},9667:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(7294),a=n(133);function o(e){var t=e.children;return r.createElement(a.Z,{applicationId:"sandbox-sq0idb-7KE3zXHZLG_X5EmLLptTYw",cardTokenizeResponseReceived:function(e,t){console.info({token:e,buyer:t})},createPaymentRequest:function(){return{countryCode:"US",currencyCode:"USD",pickupContact:{addressLines:["123 Main St"],city:"San Francisco",countryCode:"US",email:"john@doe.com",familyName:"Doe",givenName:"John",phone:"4155555555",postalCode:"94107",state:"CA"},total:{amount:"100",label:"Total"}}},createVerificationDetails:function(){return{amount:"1.00",billingContact:{addressLines:["123 Main Street","Apartment 1"],familyName:"Doe",givenName:"John",countryCode:"GB",city:"London"},currencyCode:"GBP",intent:"CHARGE"}},locationId:"4P550BZQ0TQZA"},t)}},765:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return l},default:function(){return w},frontMatter:function(){return d},metadata:function(){return f},toc:function(){return y}});var r=n(7462),a=n(3366),o=n(7294),i=n(4137),s=n(3200);function c({callbacks:e,id:t="rswps-cash-app-pay",redirectURL:n,referenceId:r,shape:a="round",size:i="medium",values:c="dark",width:u="static",...p}){const[d,l]=o.useState(),{createPaymentRequest:f,payments:m}=(0,s.cI)(),y=o.useMemo((()=>({redirectURL:n||window.location.href,referenceId:r})),[n,r]),h=o.useMemo((()=>{const e={shape:a,size:i,values:c,width:u};return Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{})}),[a,i,c,u]);if(o.useEffect((()=>{if(!f)throw new Error("`createPaymentRequest()` is required when using digital wallets");const e=new AbortController,{signal:n}=e;return(async e=>{const n=m?.paymentRequest(f);if(!n)throw new Error("`paymentRequest` is required when using digital wallets");try{const r=await(m?.cashAppPay(n,y).then((t=>{if(!e?.aborted)return l(t),t})));await(r?.attach(`#${t}`,h)),e.aborted&&await(r?.destroy())}catch(r){console.error("Initializing Cash App Pay failed",r)}})(n),()=>{e.abort()}}),[f,h,y,m]),e)for(const o of Object.keys(e))d?.addEventListener(o.toLowerCase(),e[o]);return o.createElement("div",{...p,id:t})}var u=n(9667),p=["components"],d={id:"cash-app-pay-usage",title:"Cash App Pay - Basic Usage",slug:"/cash-app-pay/usage",sidebar_label:"Usage",sidebar_position:1},l="Basic usage",f={unversionedId:"cash-app-pay/cash-app-pay-usage",id:"cash-app-pay/cash-app-pay-usage",title:"Cash App Pay - Basic Usage",description:"Take a Cash App Pay payment.",source:"@site/docs/cash-app-pay/usage.mdx",sourceDirName:"cash-app-pay",slug:"/cash-app-pay/usage",permalink:"/docs/cash-app-pay/usage",draft:!1,editUrl:"https://github.com/weareseeed/rswps-site/tree/main/docs/cash-app-pay/usage.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"cash-app-pay-usage",title:"Cash App Pay - Basic Usage",slug:"/cash-app-pay/usage",sidebar_label:"Usage",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Props",permalink:"/docs/afterpay/props"},next:{title:"Props",permalink:"/docs/cash-app-pay/props"}},m={},y=[],h={toc:y};function w(e){var t=e.components,n=(0,a.Z)(e,p);return(0,i.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"basic-usage"},"Basic usage"),(0,i.kt)("p",null,"Take a Cash App Pay payment."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { CashAppPay, PaymentForm } from 'react-square-web-payments-sdk';\n\nexport default function MyApp() {\n  return (\n    <PaymentForm>\n      <CashAppPay />\n    </PaymentForm>\n  );\n}\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Cash App Pay is currently supported only in the US."))),(0,i.kt)(u.Z,{mdxType:"PaymentForm"},(0,i.kt)(c,{mdxType:"CashAppPay"})))}w.isMDXComponent=!0},133:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(7294),a=n(3200);const o=r.forwardRef((function({applicationId:e,cardTokenizeResponseReceived:t,locationId:n,children:o,formProps:i={"aria-label":"Payment form",id:"rswps-form"},overrides:s,...c},u){return r.createElement(a.ZP,{...c,applicationId:e,cardTokenizeResponseReceived:t,locationId:n,overrides:s},r.createElement("div",{"data-testid":"rswps-form",...i,ref:u,role:"form"},o))}))},3200:function(e,t,n){n.d(t,{ZP:function(){return l},cI:function(){return f}});var r=n(7294);let a=null;function o(e){return null!==a||(a=new Promise(((t,n)=>{if("undefined"!=typeof window)if(window.Square)t(window.Square);else try{let r=function(e){return document.querySelector(`script[src="${e}"]`)}(e);r||(r=function(e){const t=document.head||document.body;if(!t)throw new Error("Square.js requires a <body> or <head> element.");const n=document.createElement("script");return n.src=e,t.appendChild(n),n}(e)),r.addEventListener("load",(()=>{window.Square?t(window.Square):n(new Error("Square.js failed to load properly."))})),r.addEventListener("error",(()=>{n(new Error("Error occurred while loading Square.js"))}))}catch(r){n(r)}else t(null)}))),a}var i=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class s extends Error{constructor(e="The Payment 'applicationId' option is not in the correct format."){super(e),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,s.prototype)}}function c(e,t,n){return i(this,void 0,void 0,(function*(){const r=void 0!==(null==n?void 0:n.scriptSrc)?n.scriptSrc:function(e){let t="";if(e.startsWith("sq0idp-")&&(t="https://web.squarecdn.com/"),e.startsWith("sandbox-sq0idb-")&&(t="https://sandbox.web.squarecdn.com/"),0===t.length)throw new s;return t+="v1/square.js",t}(e),a=yield o(r);return null===a?null:a.payments(e,t)}))}const u=r.forwardRef((function({isDevelopment:e=!1},t){throw new Error("Please contact your developer to provide the required parameters to use the Web Payments SDK.")})),p="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const d=r.createContext({cardTokenizeResponseReceived:null,createPaymentRequest:null,payments:null});function l({applicationId:e,locationId:t,children:n,overrides:a,...o}){const[i,s]=r.useState(),[l]=r.useState((()=>o.createPaymentRequest?.()));r.useEffect((()=>{const n=new AbortController,{signal:r}=n;return e&&t&&async function(n){await c(e,t,a).then((e=>{if(null===e)throw new Error("Square Web Payments SDK failed to load");if(!n?.aborted)return s(e),e}))}(r),()=>{n.abort()}}),[e,t]);const f=function(e){const t=r.useRef(e);return p((()=>{t.current=e}),[e]),r.useCallback(((...e)=>t.current(...e)),[])}((async e=>{if(e.errors||!o.createVerificationDetails)return void o.cardTokenizeResponseReceived(e);const t=await(i?.verifyBuyer(String(e.token),o.createVerificationDetails()));o.cardTokenizeResponseReceived(e,t)}));if(!e||!t)return r.createElement(u,null);if(!i)return null;const m={cardTokenizeResponseReceived:f,createPaymentRequest:l,payments:i};return r.createElement(d.Provider,{value:m},n)}const f=()=>{const e=r.useContext(d);if(void 0===e)throw new Error("useForm must be used within a FormProvider");return e}}}]);